pipeline {
 agent 'any'
 stages{
   stage('Build Maven') {
      // Run the maven build
        withMaven(maven : 'maven') {
            bat'mvn clean install'
        }
   }
   stage('Build Docker Image') {
	steps {
           scripts {
	      bat 'docker build -t crbhaskar/dockerautodeploy .'
           }
	}
   }
   stage('Push Image to Hub') {
	steps {
           scripts {
	      bat 'docker login -u crbhaskar -p Meena123$'
              bat 'docker push crbhaskar/dockerautodeploy'
           }
	}
   }
 }
}